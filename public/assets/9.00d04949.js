(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{244:function(e,t,a){"use strict";var i=a(18);t.a=async(e,t,a)=>{await i.a.post("/api/client/servers/".concat(e,"/files/write"),a,{params:{file:t},headers:{"Content-Type":"text/plain"}})}},426:function(e,t,a){"use strict";a.r(t);var i=a(1),o=a(0),r=a.n(o),n=a(18),m=a(167),l=a(244),c=a(275),d=a(16),s=a(19),p=a.n(s),x=a(8),u=a.n(x),b=a(173),g=a(164),h=a(171),f=a(168),y=a(52),C=a(196),v=a(55),w=e=>{let{onFileNamed:t,onDismissed:a}=e,i=u()(e,["onFileNamed","onDismissed"]);const o=y.a.useStoreState((e=>e.files.directory));return r.a.createElement(g.c,{onSubmit:(e,a)=>{let{setSubmitting:i}=a;t(Object(C.join)(o,e.fileName)),i(!1)},initialValues:{fileName:""},validationSchema:Object(h.d)().shape({fileName:Object(h.f)().required().min(1)})},(e=>{let{resetForm:t}=e;return r.a.createElement(b.b,p()({onDismissed:()=>{t(),a()}},i),r.a.createElement(g.b,null,r.a.createElement(f.a,{id:"fileName",name:"fileName",label:"File Name",description:"Enter the name that this file should be saved as.",autoFocus:!0}),r.a.createElement(j,null,r.a.createElement(v.a,null,"Create File"))))}))},j=Object(i.c)("div").withConfig({displayName:"FileNameModal___StyledDiv",componentId:"sc-1cpg52c-0"})({marginTop:"1.5rem",textAlign:"right"}),S=a(165),E=a(53),O=a(239),_=a(60),k=a(187);var M=[{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"Diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"Git Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history|license).md$/i},{name:"Golang",mime:"text/x-go",mode:"go",ext:["go"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"JavaScript",mime:"text/javascript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mime:"application/json",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"MariaDB",mime:"text/x-mariadb",mode:"sql"},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"PHP",mime:"text/x-php",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"Properties",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"Pug",mime:"text/x-pug",mimes:["text/x-pug","text/x-jade"],mode:"null",ext:["pug"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mime:"text/x-sh",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"Vue",mime:"script/x-vue",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mime:"application/xml",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"YAML",mime:"text/x-yaml",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]}],N=a(162),F=a(63),R=a(30),L=a(160),B=a.n(L);a(349),a(351),a(353),a(354),a(355),a(356),a(357),a(288),a(358),a(360),a(361),a(362),a(363),a(364),a(245),a(365),a(366),a(367),a(368),a(370),a(371),a(289),a(213),a(372),a(246),a(291),a(374),a(375),a(377),a(378),a(379),a(380),a(292),a(382),a(247),a(383),a(248),a(197),a(384),a(385),a(386),a(387),a(388),a(390),a(295),a(391),a(214),a(392),a(206),a(393),a(394),a(395),a(293),a(396),a(397),a(398),a(399),a(400),a(296),a(401),a(402),a(403),a(404),a(297),a(405),a(406),a(290),a(407),a(408),a(409),a(410),a(205),a(413);const T=i.c.div.withConfig({displayName:"CodemirrorEditor__EditorContainer",componentId:"sc-35dnab-0"})(["min-height:16rem;height:calc(100vh - 20rem);",";> div{",";}.CodeMirror{font-size:12px;line-height:1.375rem;background:transparent !important;background-color:transparent !important;}.CodeMirror-scroll{background:transparent !important;background-color:transparent !important;}.CodeMirror-gutters{background:transparent !important;background-color:transparent !important;}.CodeMirror-linenumber{padding:1px 12px 0 12px !important;}.CodeMirror-foldmarker{color:#cbccc6;text-shadow:none;margin-left:0.25rem;margin-right:0.25rem;}"],{position:"relative"},{borderRadius:"0.25rem",height:"100%"});var I=e=>{let{style:t,initialContent:a,filename:i,mode:n,fetchContent:m,onContentSaved:l,onModeChanged:c}=e;const[d,s]=Object(o.useState)(),p=Object(o.useCallback)((e=>{if(!e)return;const t=B.a.fromTextArea(e,{mode:"text/plain",theme:"ayu-mirage",indentUnit:4,smartIndent:!0,tabSize:4,indentWithTabs:!1,lineWrapping:!0,lineNumbers:!0,foldGutter:!0,fixedGutter:!0,scrollbarStyle:"overlay",coverGutterNextToScrollbar:!1,readOnly:!1,showCursorWhenSelecting:!1,autofocus:!1,spellcheck:!0,autocorrect:!1,autocapitalize:!1,lint:!1,autoCloseBrackets:!0,matchBrackets:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]});s(t)}),[]);return Object(o.useEffect)((()=>{var e;void 0!==i&&c((null===(e=(e=>{for(let t=0;t<M.length;t++){const a=M[t];if(a.file&&a.file.test(e))return a}const t=e.lastIndexOf("."),a=t>-1&&e.substring(t+1,e.length);if(a)for(let e=0;e<M.length;e++){const t=M[e];if(t.ext)for(let e=0;e<t.ext.length;e++)if(t.ext[e]===a)return t}})(i))||void 0===e?void 0:e.mime)||"text/plain")}),[i]),Object(o.useEffect)((()=>{d&&d.setOption("mode",n)}),[d,n]),Object(o.useEffect)((()=>{d&&d.setValue(a||"")}),[d,a]),Object(o.useEffect)((()=>{d?(d.addKeyMap({"Ctrl-S":()=>l(),"Cmd-S":()=>l()}),m((()=>Promise.resolve(d.getValue())))):m((()=>Promise.reject(new Error("no editor session has been configured"))))}),[d,m,l]),r.a.createElement(T,{style:t},r.a.createElement("textarea",{ref:p}))},q=a(172),D=(t.default=()=>{const[e,t]=Object(o.useState)(""),{action:a}=Object(d.i)(),[i,s]=Object(o.useState)("edit"===a),[p,x]=Object(o.useState)(""),[u,b]=Object(o.useState)(!1),[g,h]=Object(o.useState)("text/plain"),f=Object(d.g)(),{hash:v}=Object(d.h)(),j=y.a.useStoreState((e=>e.server.data.id)),E=y.a.useStoreState((e=>e.server.data.uuid)),L=y.a.useStoreActions((e=>e.files.setDirectory)),{addError:B,clearFlashes:T}=Object(N.a)();let V=null;Object(o.useEffect)((()=>{if("new"===a)return;t(""),s(!0);const e=Object(R.d)(v);var i,o;L(Object(C.dirname)(e)),(i=E,o=e,new Promise(((e,t)=>{n.a.get("/api/client/servers/".concat(i,"/files/contents"),{params:{file:o},transformResponse:e=>e,responseType:"text"}).then((t=>{let{data:a}=t;return e(a)})).catch(t)}))).then(x).catch((e=>{console.error(e),t(Object(n.c)(e))})).then((()=>s(!1)))}),[a,E,v]);const Y=e=>{V&&(s(!0),T("files:view"),V().then((t=>Object(l.a)(E,e||Object(R.d)(v),t))).then((()=>{if(!e)return Promise.resolve();f.push("/server/".concat(j,"/files/edit#/").concat(Object(R.b)(e)))})).catch((e=>{console.error(e),B({message:Object(n.c)(e),key:"files:view"})})).then((()=>s(!1))))};return e?r.a.createElement(_.b,{message:e,onBack:()=>f.goBack()}):r.a.createElement(O.a,{title:"File Editor"},r.a.createElement(D,{byKey:"files:view"}),r.a.createElement(F.a,null,r.a.createElement(P,null,r.a.createElement(c.a,{withinFileEditor:!0,isNewFile:"edit"!==a}))),v.replace(/^#/,"").endsWith(".pteroignore")&&r.a.createElement(q.a,{className:"!rounded-none mb-1"},r.a.createElement(W,null,r.a.createElement(z,null,"You're editing a"," ",r.a.createElement(G,null,".pteroignore")," ","file. Any files or directories listed in here will be excluded from backups. Wildcards are supported by using an asterisk (",r.a.createElement(Q,null,"*"),"). You can negate a prior rule by prepending an exclamation point (",r.a.createElement(A,null,"!"),")."))),r.a.createElement(w,{visible:u,onDismissed:()=>b(!1),onFileNamed:e=>{b(!1),Y(e)}}),r.a.createElement(U,null,r.a.createElement(m.a,{visible:i}),r.a.createElement(I,{mode:g,filename:v.replace(/^#/,""),onModeChanged:h,initialContent:p,fetchContent:e=>{V=e},onContentSaved:()=>{"edit"!==a?b(!0):Y()}})),r.a.createElement($,null,r.a.createElement(H,null,r.a.createElement(k.a,{value:g,onChange:e=>h(e.currentTarget.value)},M.map((e=>r.a.createElement("option",{key:"".concat(e.name,"_").concat(e.mime),value:e.mime},e.name))))),"edit"===a?r.a.createElement(S.a,{action:"file.update"},r.a.createElement(J,{onClick:()=>Y()},"Save Content")):r.a.createElement(S.a,{action:"file.create"},r.a.createElement(K,{onClick:()=>b(!0)},"Create File"))))},Object(i.c)(E.a).withConfig({displayName:"FileEditContainer___StyledFlashMessageRender",componentId:"sc-166yete-0"})({marginBottom:"1rem"})),P=Object(i.c)(q.a).withConfig({displayName:"FileEditContainer___StyledCard",componentId:"sc-166yete-1"})({borderBottomLeftRadius:"0px !important",borderBottomRightRadius:"0px !important",paddingLeft:"0.5rem !important",paddingRight:"0.5rem !important",paddingTop:"1.5rem !important",paddingBottom:"1.5rem !important",marginBottom:"0.25rem",marginTop:"0.5rem"}),W=Object(i.c)("div").withConfig({displayName:"FileEditContainer___StyledDiv",componentId:"sc-166yete-2"})({marginBottom:"1rem",padding:"1rem",borderRadius:"var(--radius)",borderWidth:"1px","--tw-border-opacity":"1",borderColor:"rgb(var(--color-600) / var(--tw-border-opacity))"}),z=Object(i.c)("p").withConfig({displayName:"FileEditContainer___StyledP",componentId:"sc-166yete-3"})({"--tw-text-opacity":"1",color:"rgb(var(--color-300) / var(--tw-text-opacity))",fontSize:"0.875rem",lineHeight:"1.25rem"}),G=Object(i.c)("code").withConfig({displayName:"FileEditContainer___StyledCode",componentId:"sc-166yete-4"})({fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',"--tw-bg-opacity":"1",backgroundColor:"rgb(var(--color-900) / var(--tw-bg-opacity))",borderRadius:"var(--radius)",borderWidth:"1px","--tw-border-opacity":"1",borderColor:"rgb(var(--color-600) / var(--tw-border-opacity))",paddingTop:"1px",paddingBottom:"1px",paddingLeft:"0.25rem",paddingRight:"0.25rem"}),Q=Object(i.c)("code").withConfig({displayName:"FileEditContainer___StyledCode2",componentId:"sc-166yete-5"})({fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',"--tw-bg-opacity":"1",backgroundColor:"rgb(var(--color-900) / var(--tw-bg-opacity))",borderRadius:"var(--radius)",borderWidth:"1px","--tw-border-opacity":"1",borderColor:"rgb(var(--color-600) / var(--tw-border-opacity))",paddingTop:"1px",paddingBottom:"1px",paddingLeft:"0.25rem",paddingRight:"0.25rem"}),A=Object(i.c)("code").withConfig({displayName:"FileEditContainer___StyledCode3",componentId:"sc-166yete-6"})({fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',"--tw-bg-opacity":"1",backgroundColor:"rgb(var(--color-900) / var(--tw-bg-opacity))",borderRadius:"var(--radius)",borderWidth:"1px","--tw-border-opacity":"1",borderColor:"rgb(var(--color-600) / var(--tw-border-opacity))",paddingTop:"1px",paddingBottom:"1px",paddingLeft:"0.25rem",paddingRight:"0.25rem"}),U=Object(i.c)(q.a).withConfig({displayName:"FileEditContainer___StyledCard2",componentId:"sc-166yete-7"})({position:"relative",padding:"0.25rem !important",borderRadius:"0px !important",marginBottom:"0.25rem"}),$=Object(i.c)(q.a).withConfig({displayName:"FileEditContainer___StyledCard3",componentId:"sc-166yete-8"})({display:"flex",justifyContent:"flex-end",borderTopLeftRadius:"0px !important",borderTopRightRadius:"0px !important",paddingLeft:"0.5rem !important",paddingRight:"0.5rem !important",paddingTop:"0.75rem !important",paddingBottom:"0.75rem !important"}),H=Object(i.c)("div").withConfig({displayName:"FileEditContainer___StyledDiv2",componentId:"sc-166yete-9"})({flex:"1 1 0%",borderRadius:"var(--radius)","--tw-bg-opacity":"1",backgroundColor:"rgb(var(--color-700) / var(--tw-bg-opacity))",borderWidth:"1px","--tw-border-opacity":"1",borderColor:"rgb(var(--color-600) / var(--tw-border-opacity))",marginRight:"1rem","@media (min-width: 640px)":{flex:"none"}}),J=Object(i.c)(v.a).withConfig({displayName:"FileEditContainer___StyledButton",componentId:"sc-166yete-10"})({flex:"1 1 0%","@media (min-width: 640px)":{flex:"none"}}),K=Object(i.c)(v.a).withConfig({displayName:"FileEditContainer___StyledButton2",componentId:"sc-166yete-11"})({flex:"1 1 0%","@media (min-width: 640px)":{flex:"none"}})}}]);